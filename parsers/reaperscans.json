{
  "$schema": "file:///C:/Users/Dipu/Projects/celeref-parser/schema/parser.json",

  "version": 1,
  "name": "Reaper Scans",
  "baseUrl": ["https://reaperscans.com"],
  "iconUrl": "https://reaperscans.com/storage/android-icon-192x192.png",

  "fetchCatalog": {
    "block": [
      { "set-state": "https://reaperscans.com/comics" },
      {
        "call": {
          "method": "browser.fetch_soup",
          "named-args": ["state"]
        }
      },
      { "save-state": "soup" },
      {
        "dot-call": {
          "method": "select",
          "args": ["#content .row > .text-muted"]
        }
      },
      {
        "loop": [
          { "save-state": "item" },
          {
            "dot-call": {
              "method": "select_one",
              "args": ["a.list-title"]
            }
          },
          { "save-state": "title_elem" },
          { "dot": "text" },
          { "save-state": "title" },
          { "load-state": "title_elem" },
          { "at": "href" },
          { "save-state": "url" },
          { "load-state": "item" },
          {
            "dot-call": {
              "method": "select_one",
              "args": ["a.media-content"]
            }
          },
          { "at": "style" },
          {
            "call": {
              "method": "re.find_all",
              "args": ["url\\((.*)\\)"]
            }
          },
          { "at": 0 },
          { "save-state": "cover_url" },
          {
            "set": {
              "block:result": {
                "title": "#{title}",
                "url": "#{url}",
                "cover_url": "#{cover_url}"
              }
            }
          }
        ]
      },
      {
        "set": {
          "block:result": "#{state}"
        }
      }
    ]
  },

  "fetchDetails": {},

  "fetchContents": {}
}
